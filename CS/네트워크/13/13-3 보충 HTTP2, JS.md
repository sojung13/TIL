웹(www)

#### HTTP 프로토콜 역사

- HTTP/0.9(원 라인 프로토콜)

  - 초기 버전에는 버전 번호가 없었음

  - 이후에 차후 버전과 구별하기 위해 0.9로 명명

  - 요청은 단일 라인으로 구성하고, 가능한 메서드는 GET이 유일

    ![image-20230306184459012](../../../../../../AppData/Roaming/Typora/typora-user-images/image-20230306184459012.png)

  - 응답 또한 극도로 단순(파일 내용 자체)

    ![image-20230306184511830](../../../../../../AppData/Roaming/Typora/typora-user-images/image-20230306184511830.png)

- HTTP/1.0 - 확장성 만들기
  - 버전 정보가 각 요청 사이에 전송
  - 상태 코드 라인 또한 응답의 시작 부분에 붙어 전송
  - HTTP 헤더 개념은 요청과 응답 모두를 위해 도입
    - 메타데이터 전송을 허용
    - 프로토콜을 극도로 유연하고 확장 가능하게 함
  - 다른 문서들을 전송하는 기능이 추가(Content-Type)
  - RFC 1945로 발표

- HTTP/1.1 - 표준 프로토콜

  - 1997년 초 발표(RFC 2068)
  - 개선 내용
    - 연결 재사용
    - 파이프 라이닝
    - 청크된 응답 지원
    - 추가적인 캐시 제어 메커니즘 도입
    - 언어, 인코딩 혹은 타입을 포함한 콘텐츠 협상이 도입
    - Host 헤더를 이용하여 동일 IP 주소에 다른 도메인을 호스트하는 기능 가능
  - 1999년 6월(RFC 2616)
  - 2014년 6월(RFC 7230 ~ 7240)
    - HTTP/1.1 : Message Syntax and Routing
    - ...
    - HTTP/1.1 : Authentication

- 이후의 개선 노력

  - 보안 전송을 위한 HTTPS

    - SSL/TLS 상에서 HTTP 동작

      ![image-20230306184800379](../../../../../../AppData/Roaming/Typora/typora-user-images/image-20230306184800379.png)

  - 복잡한 어플리케이션을 위한 HTTP 사용

    - 1996년 저작을 허용하도록 확장 : WebDAV
      - CardDAV, CalDAV
    - 2000년 REST(REpresentational State Transfer)
      - 브라우저나 서버의 갱신없이 데이터 탐색과 수정을 허용하는 API 제공
      - 필요로 하는 모든 것은 표준 HTTP/1.1을 통해 웹 사이트에 의해 서브되는 파일 내로 임베드됨
      - 단점 : 웹 사이트마다 비표준 RESTful API를 정의하고 그에 대한 전권을 가지게 됨
      - 2010년 이후 일반화됨
    - 복잡한 어플리케이션을 위한 HTTP 사용
      - 2005년부터, 웹 페이지에서 사용 가능한 API 집합들이 급격히 늘어남
        - 서버 전송 이벤트(Push)
        - 웹 소켓(Web Socket)
    - 웹의 보안 모델 완화
      - 원래는 Same-origin policy
        - 동일한 소스 내로 자원들의 상호 작용 제한
      - CORS(Cross-ORigin Resource Sharing), CSP(Content Security Policy)에서 확실한 제약 아래에서 허용

- SPDY 프로토콜
  - 2009년 중반 Google 발표
  - "make the web faster"Initiative
  - 과거 : 1996년 Yahoo 페이지 - 3 Requests 34KB
  - 2015년 Yahoo 첫 페이지 - 73 Requests, 658.4KB
  - 당초 설계 : 하나의 연결로 하나의 요청 처리
  - 압축을 해서 전송 속도를 높이는 개념
    - HTTP + SSL로도 39~55% 향상
  - SPDY의 Server Push 개념
    - 클라이언트가 요청하기도 전에 필요한 자원을 미리 전달
  - 클라이언트와 서버 간의 데이터 교환을 대체할 수단을 실증
  - 응답성 증가 능력을 입증
  - 전송된 데이터 중복에 관한 문제를 해결

![image-20230306185453217](../../../../../../AppData/Roaming/Typora/typora-user-images/image-20230306185453217.png)



#### SSL/TLS

- Security Socket Layer / Transport Layer Security

- 연결/세션

  - 매 연결시 보안 매개변수 협상을 새로 하지 않기 위해 도입

- 2가지 서비스 제공

  - 기밀성(Confidentiality)
    - SSL 페이로드 암호화에 쓸 공유 비밀키 정의
  - 메시지 무결성(Message Integrity)
    - 메시지 인증 코드(MAC) 생성에 사용할 공유 비밀키 정의

- SSL Record PRotocol

  ![image-20230306184925257](../../../../../../AppData/Roaming/Typora/typora-user-images/image-20230306184925257.png)



#### HTTP/2

- 이전에 애플리케이션 내에서 수행되던 사당수의 HTTP/1.1 임시 방편을 실행 취소하고, 이러한 문제를 전송 계층 내에서 해결할 수 있도록 함으로써 애플리케이션을 더 빠르고, 단순하고, 강력하게 만듦

- 2015년 5월 공식 표준화 발표(RFC 7540, 7541)

- 특징

  - 이진 프로토콜(바이너리 프레이밍)
    - 더 이상 읽을 수도 없고 수작업을 만들어낼 수 없음 -> 새로운 최적화 기술 구현 가능
  - 병렬 요청이 동일한 커넥션 상에서 다루어질 수 있는 다중화 프로토콜
  - 전송된 데이터의 분명한 중복과 그런 데이터로부터 유발된 불필요한 오버헤드를 제거, 연속된 요청 사이의 매우 유사한 내용으로 존재하는 헤더들을 압축
  - 서버 푸쉬라고 불리는 메커니즘에 의해, 서버로 하여금 사전에 클라이언트 캐시를 필요하게 될 데이터로 채워넣도록 허용

- 웹 브라우저와 서버의 진화로 바로 효과를 볼 수 있어서 급속한 확산

- 바이너리 프레이밍 계층

  - HTTP 메시지가 캡슐화되어 클라이언트와 서버 사이에 전송되는 방식을 규정

  - HTTP 의미 체계는 영향을 받지 않지만 전송 중에 의미 체계가 인코딩되는 방식에 변화

    - 모든 HTTP/2 통신은 더 작은 메시지와 프레임으로 분할되며, 각각은 바이너리 형식으로 인코딩

      ![image-20230306185800433](../../../../../../AppData/Roaming/Typora/typora-user-images/image-20230306185800433.png)

- 스트림, 메시지 및 프레임
  - 스트림
    - 구성된 연결 내에서 전달되는 바이트의 양방향 흐름이며, 하나 이상의 메시지가 전달될 수 있음
  - 메시지
    - 논리적 요청 또는 응답 메시지에 매핑되는 프레임의 전체 시퀀스
  - 프레임
    - HTTP/2에서 통신의 최소 단위이며 각 최소 단위에는 하나의 프레임 헤더가 포함
    - 프레임 헤더는 최소한으로 프레임이 속하는 스트림을 식별
  - 스트림, 메시지 및 프레임의 관계
    - 모든 통신은 단일 TCP 연결을 통해 수행되며 전달될 수 있는 양방향 스트림의 수는 제한이 없음
    - 각 스트림에는 양방향 메시지 전달에 사용되는 고유 식별자와 우선순위 정보(선택 사항)가 있음
    - 프레임은 통신의 최소 단위이며 특정 유형의 데이터(ex. HTTP 헤더, 메시지 페이로드 등)를 전달

![image-20230306185955435](../../../../../../AppData/Roaming/Typora/typora-user-images/image-20230306185955435.png)



- 요청 및 응답 다중화

  - HTTP/1.x에서 성능 개선을 위해 클라이언트가 여러 병렬 요청을 수행하려는 경우, 여러 TCP 연결 사용

    - 연결당 한 번에 하나의 응답만 전달되도록 보장
    - HOL(Head-of-Line) 차단
    - 기본 TCP 연결의 비효율적인 사용 초래

  - HTTP/2의 새 바이너리 프레이밍 계층

    - 이러한 제한을 없애고 전체 요청 및 응답 다중화 지원

      ![image-20230306190105889](../../../../../../AppData/Roaming/Typora/typora-user-images/image-20230306190105889.png)

  - HTTP 메시지를 독립된 프레임으로 세분화하고 이 프레임을 인터리빙한 다음, 다른 쪽에서 다시 조립

    - 다음과 같은 작업 가능
      - 여러 요청을 하나도 차단하지 않고 병렬로 인터리빙할 수 있음
      - 여러 응답을 하나도 차단하지 않고 병렬로 인터리빙할 수 있음
      - 단일 연결을 사용하여 여러 요청과 응답을 병렬로 전달할 수 있음
      - 연결된 파일, 이미지 스프라이트(image sprites), 도메인 분할과 같은 불필요한 HTTP/1.x 임시 방편을 제거
      - 불필요한 지연 시간을 제거하고 가용 네트워크 용량의 활용도를 개선하여 페이지 로드 시간을 줄임

  - 기대 효과

    - 애플리케이션이 더 빠르고 단순해지고 배포 비용이 절감

